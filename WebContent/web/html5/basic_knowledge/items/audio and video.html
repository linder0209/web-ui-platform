<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>HTML5 Audio/Video 标签</title>
        <link rel="stylesheet" href="../../../../platform/css/base.css" type="text/css"/>
        <link rel="stylesheet" href="../../../../platform/css/platform.css" type="text/css"/>
        <link rel="stylesheet" href="../../../../platform/css/theme/skyblue.css" type="text/css"/>
        <link rel="stylesheet" href="../../../../platform/css/web.css" type="text/css"/>
        <script type="text/javascript" src="../../../../platform/javascript/jquery/jquery.js"></script>
        <script type="text/javascript">
            $(function() {
                $('.h-web-catalogue li a').click(function(e) {
                    e.preventDefault();
                    var paragraphNum = $(this).attr('paragraph'),
                            paragraph = $('.h-web-paragraph h3[paragraph="' + paragraphNum + '"]'),
                            offset = paragraph.offset();
                    if (offset) {
                        document.documentElement.scrollTop = offset.top;
                        document.body.scrollTop = offset.top;
                    }
                });
            });
        </script>
    </head>
    <body>
        <h3 class="h-web-paragraph-title">目录</h3>
        <ol class="h-web-catalogue">
            <li><a paragraph="1" href="#">音频&lt;audio&gt; 属性</a></li>
			<li><a paragraph="2" href="#">视频&lt;video&gt; 属性</a></li>
            <li><a paragraph="3" href="#">音频和视频通用方法、属性和事件</a></li>
            <li><a paragraph="4" href="#">参考资料</a></li>
    </ol>
        <div class="h-web-paragraph">
            <h3 paragraph="1">音频Audio属性</h3>
            <ul>
              <li>src：音乐的URL，也可以使用 <a href="http://www.w3school.com.cn/html5/tag_source.asp" title="HTML 5 <source> 标签">&lt;source&gt; 标签</a> 来设置音频。</li>
              <li>preload：预加载，可能的值：
auto - 当页面加载后载入整个音频；
meta - 当页面加载后只载入元数据
；none - 当页面加载后不载入音频</li>
              <li>autoplay：'autoplay'&nbsp; &nbsp; 如果出现该属性，则音频在就绪后马上播放。</li>
              <li>loop："loop" &nbsp; &nbsp; 循环播放</li>
              <li>controls：'controls''&nbsp; &nbsp;  controls 属性规定浏览器应该为音频提供播放控件。</li>
          </ul>
          <p>例子</p>
            <pre>&lt;audio src="http://s3.amazonaws.com/audiojs/02-juicy-r.mp3" preload="auto" controls=&quot;controls&quot;&gt;&lt;/audio&gt;</pre>
            <p>&nbsp;</p>

          <h3 paragraph="2">视频&lt;video&gt; 属性</h3>
          <ul>
              <li>src：视频的URL</li>
              <li>poster：视频封面，没有播放时显示的图片，poster属性用于指定一张图片，在当前视频数据无效时显示（预览图）。视频数据无效可能是视频正在加载，可能是视频地址错误等等。</li>
              <li>preload：预加载</li>
              <li>autoplay：自动播放</li>
              <li>loop：循环播放</li>
              <li>controls：浏览器自带的控制条</li>
              <li>width：视频宽度</li>
              <li>height：视频高度</li>
          </ul>
            
          <h3 paragraph="3">音频和视频通用方法、属性和事件</h3>
            <p>HTMLVideoElement 和 HTMLAudioElement 均继承自 HTMLMediaElement。</p>
            <p>
          <h4>错误状态</h4>
              <ol>
              <li>Media.error; //null:正常</li>
              <li>Media.error.code; //1.用户终止 2.网络错误 3.解码错误 4.URL无效</li>
              
            </ol>
            <h4>网络状态</h4>
			<ol>
              <li>Media.currentSrc; //返回当前资源的URL</li>
              <li>Media.src = value; //返回或设置当前资源的URL</li>
              <li>Media.canPlayType(type); //是否能播放某种格式的资源</li>
              <li>Media.networkState; //0.此元素未初始化  1.正常但没有使用网络  2.正在下载数据  3.没有找到资源</li>
              <li>Media.load(); //重新加载src指定的资源</li>
              <li>Media.buffered; //返回已缓冲区域，TimeRanges</li>
             <li> Media.preload; //none:不预载 metadata:预载资源信息 auto:
          </ol>
              
              <h4>准备状态</h4>
              <ol>
             <li> Media.readyState;	//1:HAVE_NOTHING 2:HAVE_METADATA 3.HAVE_CURRENT_DATA 4.HAVE_FUTURE_DATA 5.HAVE_ENOUGH_DATA</li>
              <li>Media.seeking; //是否正在seeking</li>
              
              </ol>
              
          <h4>回放状态</h4>
 				<ol>
              <li>Media.currentTime = value; //当前播放的位置，赋值可改变位置</li>
              <li>Media.startTime; //一般为0，如果为流媒体或者不从0开始的资源，则不为0</li>
              <li>Media.duration; //当前资源长度 流返回无限，在firefox和chrome返回的不一样，chrome可以正确返回长度，在firefox可以用以下事件监听来处理
                <pre>document.getElementById('audioElement').addEventListener('loadedmetadata',function(e){  <br>    //处理内容<br>});</pre>
                </li>
              <li>Media.paused; //是否暂停</li>
              <li>Media.defaultPlaybackRate = value;//默认的回放速度，可以设置</li>
              <li>Media.playbackRate = value;//当前播放速度，设置后马上改变</li>
              <li>Media.played; //返回已经播放的区域，TimeRanges，关于此对象见下文</li>
              <li>Media.seekable; //返回可以seek的区域 TimeRanges</li>
              <li>Media.ended;	//是否结束</li>
              <li>Media.autoPlay;	//是否自动播放</li>
              <li>Media.loop;	//是否循环播放</li>
              <li>Media.play();	//播放</li>
              <li>Media.pause();	//暂停</li>
              </ol>
              
             <h4>控制</h4> 
              <ol>
              <li>Media.controls;//是否有默认控制条</li>
              <li>Media.volume = value; //音量</li>
              <li>Media.muted = value; //静音</li>
              
              </ol>
              
          <h4>TimeRanges(区域)对象</h4> 
              
              <ol>
              <li>TimeRanges.length; //区域段数</li>
              <li>TimeRanges.start(index) //第index段区域的开始位置</li>
              <li>TimeRanges.end(index) //第index段区域的结束位置</li>
              
              </ol>
              
          
            <p>下面看一下相关事件</p>
            <p>首先定一个测试事件方法</p>
            <pre>var eventTester = function(e){<br>    Media.addEventListener(e,function(){<br>       console.log(e);<br>    });<br>}</pre>

			 <ol>
              <li>eventTester(&quot;loadstart&quot;);	//客户端开始请求数据</li>
              <li>eventTester(&quot;progress&quot;);	//客户端正在请求数据</li>
              <li>eventTester(&quot;suspend&quot;);		//延迟下载</li>
              <li>eventTester(&quot;abort&quot;);		//客户端主动终止下载（不是因为错误引起），</li>
              <li>eventTester(&quot;error&quot;);		//请求数据时遇到错误</li>
              <li>eventTester(&quot;stalled&quot;);		//网速失速</li>
              <li> eventTester(&quot;play&quot;);		//play()和autoplay开始播放时触发</li>
              <li> eventTester(&quot;pause&quot;);		//pause()触发</li>
              <li> eventTester(&quot;loadedmetadata&quot;);	//成功获取资源长度</li>
              <li> eventTester(&quot;loadeddata&quot;);	//加载完数据</li>
              <li> eventTester(&quot;waiting&quot;);		//等待数据，并非错误</li>
              <li> eventTester(&quot;playing&quot;);		//开始回放</li>
              <li> eventTester(&quot;canplay&quot;);		//可以播放，但中途可能因为加载而暂停</li>
              <li> eventTester(&quot;canplaythrough&quot;); //可以播放，歌曲全部加载完毕</li>
              <li> eventTester(&quot;seeking&quot;);		//寻找中</li>
              <li> eventTester(&quot;seeked&quot;);		//寻找完毕</li>
              <li> eventTester(&quot;timeupdate&quot;);	//播放时间改变</li>
              <li> eventTester(&quot;ended&quot;);		//播放结束</li>
              <li> eventTester(&quot;ratechange&quot;);	//播放速率改变</li>
              <li> eventTester(&quot;durationchange&quot;);	//资源长度改变</li>
              <li> eventTester(&quot;volumechange&quot;);	//音量改变</li>
             </ol>
            <h3 paragraph="4">参考资料</h3>
            <p><a href="http://www.w3.org/2010/05/video/mediaevents.html" target="_blank">w3c上有个很全面的示例video的各种属性和时间的测试</a></p>
            <p><a href="http://www.5icool.org/a/201006/563.html" target="_blank">关于video属性的详细说明可推荐这篇文章</a></p>
        </div>
    </body>
</html>